多态的作用

隐藏细节

接口重用。



虚函数表在编译时候确定，在运行时候查询使用哪个。



面向对象的三个特征

封装：将数据保护，不让外界随意访问，使用struct 或者class，private，protect。public实现。

继承：复用。

多态：抽象，问题抽象为不同的层面。



函数都会进行类型检查

内存的分配方式：

静态存储区：

​	全局变量。

​	静态局部变量。

栈：  auto 类型变量。

堆： 动态分配区。



全局变量与局部变量的区别：

- 时间： 局部变量是使用时候创建，函数结束时候销毁。全局变量在程序启动时候创建，结束时候销毁。
- 空间：局部变量在函数内部有效。全局变量在整个文件有效。
- 外部链接：局部变量在外部不可访问，非静态全局变量在外部可以访问。

实现方法：放置的位置不同。



malloc与new在分配失败时候都返回NULL



区分16位于32位机器：

```c++
int *ptr;
sizeof(ptr);
```



数组名作为实参，传递的是第一个元素的地址。



二者的区别

| malloc         | new              |
| -------------- | ---------------- |
| 只申请内置类型 | 可以调用构造函数 |
| 不满足构造对象 |                  |
| 函数           | 运算符           |



父类的析构函数应该为虚函数。因为

```c++
class A{}

class B:public A{}

A& a=new B;
delete a;   // 调用A的析构函数，如果它不是虚函数，则B 的析构函数不会调用从而内存泄漏。
```



| 引用       | 指针 |
| ---------- | ---- |
| 需要初始化 | 无需 |
| 不可被更改 | 可以 |
| 不可指向空 | 可以 |

多次close一个 文件指针，会导致不可预期的行为。因为该指针可能被分配给其他变量。



| 重载 overload          | 重写overwrite                    |
| ---------------------- | -------------------------------- |
| 函数名称相同，参数不同 | 继承时候，子类重定义父类函数行为 |



`const`的作用

- 变量：变量不可变。
- 指针：`const int *prt`   表示指向的变量值不变。以及  `int* const ptr` 表示不可堆指针赋值。
- 参数：内部不会修改该参数。
- 类的成员函数： 不可修改类的内部变量。
- 类成员函数的返回值：返回值不是左值。



virtual 可以被隐式继承。



预定义的宏：

```c++
__FILE__;
__LINE__;
__FUNC__;

```

```c++
class A {};
sizeof(A)=1;
因为分配需要一个字节。

```



重载依靠参数的类型与个数确定



| 浅拷贝   | 深拷贝       |
| -------- | ------------ |
| 只copy值 | copy值与资源 |

```c++
class A{// 里面指向一个资源。
};
浅拷贝会将资源也复制过去。从而使得复制品释放资源时候将原来的资源释放掉。
```

`a++` 不可以作为左值。



return 不可以是 栈内存上 的自动变量 的指针或引用。因为在函数退出时候销毁。

```c
cout<< true ? 1:"1"<<endl;不合法。因为三元运算符要求 表达式2与表达式3是同样的类型。
```

`.` 不可以重载。

```c++
char str[]="world";
sizeof(str)=6;
// sizeof(数组) ：数组元素的个数。以及添加'\0';
```

在默认构造函数里面调用非默认构造函数是非编译器行为。

```c++
class A{
    A(int x){
        //
    }
    A (){
        A(8);
    }
}
```



```
big(a,b)=(a+b+|a-b|)/2;
```



| struct              | class                |
| ------------------- | -------------------- |
| 可以定义函数        |                      |
| 可以继承 默认public | 可以继承 默认private |
| 对象可以用new创建   |                      |



函数的前面不包含返回值类型。



静态类成员是确定变量。不能作为虚函数。

友元函数不能虚函数

inline函数不能作虚函数，因为要展开。

普通函数能作虚函数，因为要没继承。



空类有：

- 默认constructor
- 默认 copy constructor
- 析构函数。



```c++
return string(s1+s2);
效率优于
string temp(s1+s2);
return temp;
//因为return匿名对象

```

